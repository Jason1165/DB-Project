{% extends "base.html" %}
{% block title %}Ratings{% endblock %}
{% block content %}

<div id="ratings">

  <div class="banner">
    <h1>Ratings</h1>
  </div>

  {% if my_rating %}
  <div class="rating-box">
    <h3><strong>Your Rating:</strong> {{ my_rating.score }}</h3>

    <form method="post">
      <label>Update Rating:</label>
      <input type="number" name="rating" min="1" max="5" value="{{ my_rating.score }}" required>
      <input type="submit" value="Update Rating" class="button">
    </form>

    <form method="post" action="{{ url_for('delete_rating', service_id=service_id) }}">
      <button type="submit" class="button delete">Delete Rating</button>
    </form>
  </div>
  {% else %}
  <div class="rating-box">
    <form method="post">
      <label>Rating:</label>
      <input type="number" name="rating" min="1" max="5" required>
      <input type="submit" value="Submit Rating" class="button">
    </form>
  </div>
  {% endif %}

  <div class="rating-box">
    <h3>All Ratings</h3>
    <ul>
      {% for r in ratings %}
      <li><strong>{{ r.username }}:</strong> {{ r.score }}</li>
      {% endfor %}
    </ul>
  </div>

</div>
{% endblock %}
